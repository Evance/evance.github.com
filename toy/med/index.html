
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
    <title>MED Test</title>
    <style>
        dt {font-weight:bold;font-size:18px;}
        dd {margin:0}
    </style>
</head><body>
<div id="wraper">
<dl>
<dt>MED Test<dt>
<dd>sw: <span id="J_sw"></span></dd>
<dd>sh: <span id="J_sh"></span></dd>
<dd>cw: <span id="J_cw"></span></dd>
<dd>ch: <span id="J_ch"></span></dd>
<dd>pr: <span id="J_pr"></span></dd>
<dd>ist: <span id="J_ist"></span></dd>
<dl>
</div>
<script>
(function() {

     var win = window, doc = document;
    var ra = win.devicePixelRatio || 1,
        cw = win.innerWidth, //viewport 可见宽
        ch = win.innerHeight, //viewport 可见高
        sw, sh;
    
    if (screen) {
        if (Math.abs(screen.width - cw*ra) < 0.2*screen.width) {
            //证明 screen 的值 是预期的 算上像素密度的值
            cw = screen.width/ra;
            ch = screen.height/ra;
            sw = screen.width;
            sh = screen.height;
        } else {
            // screen 的值不带像素密度， 在 ios6 和部分Android 机型上出现
            cw = screen.width;
            ch = screen.height;
            sw = screen.width * ra;
            sh = screen.height * ra;
        }
    } else {
        //如果不支持screen 对象，暂且用 innerWidth ,innerHeight , 这在高度数据上不准确，因为 innerHeight 可变,而且没算上 toolbar 和地址栏
        sw = cw * ra;
        sh = ch * ra;
    }
    
    //istouch
    var ist = (('createTouch' in doc) && ('ontouchstart' in win)) ? 1 : 0;
        
    $("J_cw").innerText = cw;
    $("J_ch").innerText = ch;
    $("J_sw").innerText = sw;
    $("J_sh").innerText = sh;
    $("J_pr").innerText = ra;
    $("J_ist").innerText = ist;
    function $(id){
        return document.getElementById(id);
    }
})()
</script>
</body>
</html>

